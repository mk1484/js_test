<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ハッシュ/オブジェクト同士をマージしたい</title>
<script src="jquery-1.12.4.min.js"></script>
</head>
<body>
<script>
/////////////////////////////////////////////////////////////////////////////////////////////////
//  オブジェクト/ハッシュ(連想配列)を結合するならば、
//  jQueryの$.extendメソッドを利用する。
//
//  $.extend(ターゲット, コピー元1, コピー元2,・・・)
/////////////////////////////////////////////////////////////////////////////////////////////////

var data1 = { id:10, name:'Yamada'}
var data2 = { age:40, married:true}
var data3 = { blood:'A', name:"Taro Yamada"}

$.extend(data1, data2, data3);
console.log(data1); //{age: 40 blood: "A" id: 10 married: truename: "Taro Yamada"}



/////////////////////////////////////////////////////////////////////////////////////////////////
//  $.extendメソッドは先頭のオブジェクトを書き換える。
//  他のオブジェクトに影響を及ぼしたくない場合は、以下のようにする
/////////////////////////////////////////////////////////////////////////////////////////////////
var merged = $.extend({}, data1, data2, data3);
console.log(merged); //{age: 40 blood: "A" id: 10 married: truename: "Taro Yamada"}
</script>


<script>





/////////////////////////////////////////////////////////////////////////////////////////////////
//  オブジェクトが入れ子になっている場合は注意が必要
/////////////////////////////////////////////////////////////////////////////////////////////////
var data1 = {
  name: 'Yamada',
  desc:{
    email:'yamada@wings.msn.to',
    birth:'1970-01-01',
    child:2
  }
};

var data2 = {
  desc:{
    child:3
  }
};
$.extend(data1, data2);
console.log(data1); //{name: "Yamada", desc: { child:3}} 入れ子になったオブジェクトの内容が置き換わってしまう。

/////////////////////////////////////////////////////////////////////////////////////////////////
//  入れ子となったオブジェクトの中身もコピーするには$.extendメソッドの第一引数にtrueを渡すと
//  正しくdescプロパティの内容もマージされる。
/////////////////////////////////////////////////////////////////////////////////////////////////
$.extend(true, data1, data2);
console.log(data1); //{name: "Yamada", desc: { birth:'1970-01-01', child:3, email:'yamada@wings.msn.to'}}


</script>
</body>
</html>
